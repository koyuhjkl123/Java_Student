package com.test;

import java.sql.Date;
import java.time.LocalDate;

import javax.swing.JOptionPane;

public class Exam01_Book_Rental extends Exam01_Book {

//	책, 대여, 반납

	private boolean isrental = false; // 책 대여 여부
	private static int isInt_rantal = 7; // 대여 기간 7일 고정
	private String book_name; // 책 이름
	Date book_return_date; // 반납 예정일

	Exam01_Book Book_lists;
//	반납기간은 항시 일수 해당 지점에 12시
	LocalDate today;

	public Exam01_Book_Rental() {
	};

	public Exam01_Book_Rental(String book_name, boolean isrental) {
		super(book_name, isrental);
		this.book_name = book_name;
		this.isrental = isrental;
	}

	public String getBookName() {
		return book_name;
	}

	public boolean getIsRental() {
		return isrental;
	}

	public int getIsIntRantal() {
		return isInt_rantal;
	}

	public void BookIsRental(String bookname) {
//		책 대여가 가능한지 여부확인
		boolean isbook = false;
		
		today = LocalDate.now();
		
		LocalDate returntoday = today.plusDays(7);
		
		for(int i=0; i < books.size(); i++) {
//		for (Exam01_Book book : books) {
			StringBuilder ab = new StringBuilder();
//			대여할 책이 기존 책에 있는지
				if (books.get(i).getTitle().equals(bookname)) {
					isbook = true;
//				해당 책이 대여한게 있는지
					if (books.get(i).book_isrental) {
						JOptionPane.showMessageDialog(null, "이미 대여된 " + books.get(i).getTitle() + "책입니다.", "북 카페",
								JOptionPane.PLAIN_MESSAGE);
//					책이 있고 대여한게 없다면 대여 가능
					} else {
						books.get(i).book_isrental = true; // 해당 책은 대여가 됬다.
						JOptionPane.showMessageDialog(null, "해당" + books.get(i).getTitle() + " 대여가 가능합니다." + "대여를 하시겠습니까?",
								"북 카페", JOptionPane.PLAIN_MESSAGE);
					}
					break;
				}
				
				if(!(isbook)) {
					JOptionPane.showMessageDialog(null, "검색 하신 " + bookname + "책은 없습니다.", "북 카페",
							JOptionPane.PLAIN_MESSAGE);
				}
		}
	}

}
